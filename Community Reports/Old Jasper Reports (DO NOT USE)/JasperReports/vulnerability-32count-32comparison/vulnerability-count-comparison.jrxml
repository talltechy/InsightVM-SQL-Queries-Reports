<?xml version="1.0" encoding="UTF-8"?><jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="vulnerability-count-comparison" pageWidth="792" pageHeight="612" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" resourceBundle="vulnerability-count-comparison" uuid="18d1f7be-99ce-4061-9761-8924bc4d44bf">	<property name="ireport.zoom" value="1.0"/>	<property name="ireport.x" value="0"/>	<property name="ireport.y" value="0"/>	<style name="table">		<box>			<pen lineWidth="1.0" lineColor="#000000"/>		</box>	</style>	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 1">		<box>			<pen lineWidth="1.0" lineColor="#000000"/>		</box>	</style>	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 2">		<box>			<pen lineWidth="1.0" lineColor="#000000"/>		</box>	</style>	<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 3">		<box>			<pen lineWidth="1.0" lineColor="#000000"/>		</box>	</style>	<style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">		<box>			<pen lineWidth="0.5" lineColor="#000000"/>		</box>	</style>	<subDataset name="Change in Status" uuid="859bdbf0-db16-4779-b71e-379aea583f04">		<queryString>			<![CDATA[WITH   baseline_scans AS (      SELECT asset_id, scanAsOf(asset_id, localtimestamp - interval '30 days') AS scan_id      FROM dim_asset   ),   baseline_vulns AS (      SELECT fasv.vulnerability_id, SUM(fasv.vulnerability_instances) AS instances      FROM baseline_scans bs         JOIN fact_asset_scan_vulnerability_finding fasv ON fasv.asset_id = bs.asset_id AND fasv.scan_id = bs.scan_id      GROUP BY fasv.vulnerability_id   ),   current_vulns AS (      SELECT fav.vulnerability_id, SUM(fav.vulnerability_instances) AS instances      FROM fact_asset_vulnerability_finding fav      GROUP BY fav.vulnerability_id   ),   baseline_comparison AS (      SELECT COALESCE(cv.vulnerability_id, bv.vulnerability_id) AS vulnerability_id, COALESCE(cv.instances, 0) AS current_instances, COALESCE(bv.instances, 0) AS baseline_instances,         COALESCE(cv.instances, 0) - COALESCE(bv.instances, 0) AS difference      FROM current_vulns cv         FULL OUTER JOIN baseline_vulns bv ON bv.vulnerability_id = cv.vulnerability_id   )SELECT CASE   WHEN bc.difference > 0 THEN '+'   WHEN bc.difference < 0 THEN '-'   ELSE ' 'END AS type, ABS(bc.difference) AS difference, dv.title, bc.current_instances, bc.baseline_instances,   to_char(now(), 'MM/DD/YYYY') AS current_period, to_char(now() - interval '30 days', 'MM/DD/YYYY') AS baseline_periodFROM baseline_comparison bc   JOIN dim_vulnerability dv ON bc.vulnerability_id = dv.vulnerability_idORDER BY ABS(bc.difference) DESC, dv.title ASC]]>		</queryString>		<field name="type" class="java.lang.String"/>		<field name="difference" class="java.math.BigDecimal"/>		<field name="title" class="java.lang.String"/>		<field name="current_instances" class="java.math.BigDecimal"/>		<field name="baseline_instances" class="java.math.BigDecimal"/>		<field name="current_period" class="java.lang.String"/>		<field name="baseline_period" class="java.lang.String"/>	</subDataset>	<queryString>		<![CDATA[SELECT 1]]>	</queryString>	<field name="?column?" class="java.lang.Integer"/>	<variable name="REPORT_DATE" class="java.util.Date">		<variableExpression><![CDATA[new java.util.Date()]]></variableExpression>	</variable>	<variable name="CURRENT_REPORT_PERIOD" class="java.lang.String"/>	<background>		<band splitType="Stretch"/>	</background>	<title>		<band height="105">			<textField>				<reportElement x="0" y="65" width="752" height="37" uuid="b0833012-2eb3-4069-96a8-09d44d746005"/>				<textElement>					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[$R{description}]]></textFieldExpression>			</textField>			<textField isBlankWhenNull="true">				<reportElement x="58" y="0" width="694" height="58" uuid="a3d00f24-f566-4e27-a717-72b170e3d259"/>				<textElement textAlignment="Center" verticalAlignment="Middle">					<font fontName="Arial" size="32" isBold="true"/>				</textElement>				<textFieldExpression><![CDATA[$R{title}]]></textFieldExpression>			</textField>			<image scaleImage="RetainShape">				<reportElement x="0" y="0" width="58" height="58" uuid="a6d8527f-49e6-428a-8866-9677e0cc4bb4"/>				<imageExpression><![CDATA["nx_ent.jpg"]]></imageExpression>			</image>		</band>	</title>	<detail>		<band height="125" splitType="Stretch">			<componentElement>				<reportElement key="table 3" style="table 3" x="0" y="0" width="745" height="125" uuid="b7a3b9fa-b00a-40f3-b861-a21371be0720"/>				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">					<datasetRun subDataset="Change in Status" uuid="26927e4a-4a7e-4238-8b8f-18ea0f13b941">						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>					</datasetRun>					<jr:column width="514" uuid="f68699ed-8151-470e-bda7-e1492f3d7f44">						<jr:columnHeader style="table 3_CH" height="40" rowSpan="1">							<textField>								<reportElement x="0" y="0" width="514" height="40" uuid="51ecf459-6205-4df7-aed6-7dbdd18640a2"/>								<textElement textAlignment="Center" verticalAlignment="Middle">									<font isBold="true"/>								</textElement>								<textFieldExpression><![CDATA[$R{vulnerability_title}]]></textFieldExpression>							</textField>						</jr:columnHeader>						<jr:detailCell style="table 3_TD" height="23" rowSpan="1">							<textField>								<reportElement x="5" y="0" width="509" height="20" uuid="86d4daef-da36-44b2-85fd-300fec100eba"/>								<textElement verticalAlignment="Middle"/>								<textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>							</textField>						</jr:detailCell>					</jr:column>					<jr:column width="76" uuid="6d8c7fa5-0210-4afc-8b7e-2f04f45a67e5">						<jr:columnHeader style="table 3_CH" height="40" rowSpan="1">							<textField>								<reportElement x="0" y="0" width="76" height="20" uuid="51ecf459-6205-4df7-aed6-7dbdd18640a2"/>								<textElement textAlignment="Center" verticalAlignment="Bottom">									<font isBold="true"/>								</textElement>								<textFieldExpression><![CDATA[$R{current_date}]]></textFieldExpression>							</textField>							<textField>								<reportElement x="0" y="20" width="76" height="20" uuid="6d84a67b-b463-44c5-85ab-cd10f449e614"/>								<textElement textAlignment="Center" verticalAlignment="Top" markup="none">									<font isBold="true"/>								</textElement>								<textFieldExpression><![CDATA[$F{current_period}]]></textFieldExpression>							</textField>						</jr:columnHeader>						<jr:detailCell style="table 3_TD" height="23" rowSpan="1">							<textField>								<reportElement x="0" y="0" width="76" height="20" uuid="7d3244e3-7d21-4a9f-81aa-031d62c45b90"/>								<textElement textAlignment="Center" verticalAlignment="Middle"/>								<textFieldExpression><![CDATA[$F{current_instances}]]></textFieldExpression>							</textField>						</jr:detailCell>					</jr:column>					<jr:column width="76" uuid="acf5aa70-035e-4411-8b69-6c2dd4002a07">						<jr:columnHeader style="table 3_CH" height="40" rowSpan="1">							<textField>								<reportElement x="0" y="0" width="76" height="20" uuid="51ecf459-6205-4df7-aed6-7dbdd18640a2"/>								<textElement textAlignment="Center" verticalAlignment="Bottom">									<font isBold="true"/>								</textElement>								<textFieldExpression><![CDATA[$R{previous_date}]]></textFieldExpression>							</textField>							<textField>								<reportElement x="0" y="20" width="76" height="20" uuid="9bb3ac8d-e778-4879-a692-39a720d4cdbb"/>								<textElement textAlignment="Center" verticalAlignment="Top" markup="none">									<font isBold="true"/>								</textElement>								<textFieldExpression><![CDATA[$F{baseline_period}]]></textFieldExpression>							</textField>						</jr:columnHeader>						<jr:detailCell style="table 3_TD" height="23" rowSpan="1">							<textField isBlankWhenNull="true">								<reportElement x="0" y="0" width="76" height="23" uuid="af7ae373-5567-4896-9f87-370143b83be0"/>								<textElement textAlignment="Center" verticalAlignment="Middle"/>								<textFieldExpression><![CDATA[$F{baseline_instances}]]></textFieldExpression>							</textField>						</jr:detailCell>					</jr:column>					<jr:column width="76" uuid="d1411869-13df-4f9c-b21d-842a5a947bf4">						<jr:columnHeader style="table 3_CH" height="40" rowSpan="1">							<textField>								<reportElement x="0" y="0" width="76" height="40" uuid="f31778de-34de-4e05-8a19-97429ee28660"/>								<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">									<font isBold="true"/>								</textElement>								<textFieldExpression><![CDATA[$R{difference}]]></textFieldExpression>							</textField>						</jr:columnHeader>						<jr:detailCell style="table 3_TD" height="23" rowSpan="1">							<textField>								<reportElement x="0" y="0" width="76" height="23" uuid="06b7b38a-e9f0-4540-9d2b-a39aeea5bd82"/>								<textElement textAlignment="Center" verticalAlignment="Middle"/>								<textFieldExpression><![CDATA[$F{type} + $F{difference}]]></textFieldExpression>							</textField>						</jr:detailCell>					</jr:column>				</jr:table>			</componentElement>		</band>	</detail>	<pageFooter>		<band height="30">			<textField evaluationTime="Report">				<reportElement x="383" y="5" width="54" height="20" uuid="e883b017-c439-4508-a59e-662a50cdcf78"/>				<textElement verticalAlignment="Middle">					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>			</textField>			<textField>				<reportElement x="303" y="5" width="80" height="20" uuid="ed99c591-cfaa-4b43-9b48-102070c544e7"/>				<textElement textAlignment="Right" verticalAlignment="Middle">					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[$R{page}+ " " +$V{PAGE_NUMBER}+ " " + $R{of};]]></textFieldExpression>			</textField>			<textField>				<reportElement x="0" y="5" width="252" height="20" uuid="cb8cb895-e2f1-42e9-aa6f-11c99d579737"/>				<textElement verticalAlignment="Middle">					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[$R{footer_generated}]]></textFieldExpression>			</textField>			<textField>				<reportElement x="539" y="5" width="213" height="20" uuid="49811b31-6f24-402d-8477-9a95962bd1f0"/>				<textElement textAlignment="Right" verticalAlignment="Middle">					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[$R{report_date} + ": " + new java.text.SimpleDateFormat("MMMMM dd, yyyy").format($V{REPORT_DATE})]]></textFieldExpression>			</textField>		</band>	</pageFooter>	<noData>		<band height="210">			<printWhenExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()==0)]]></printWhenExpression>			<textField>				<reportElement x="0" y="128" width="752" height="82" uuid="03114675-8e17-4ec8-a87f-511a50495de7"/>				<textElement textAlignment="Center" verticalAlignment="Middle">					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[$R{no_data}]]></textFieldExpression>			</textField>			<textField>				<reportElement x="0" y="64" width="752" height="64" uuid="b0833012-2eb3-4069-96a8-09d44d746005"/>				<textElement>					<font fontName="Arial"/>				</textElement>				<textFieldExpression><![CDATA[$R{description}]]></textFieldExpression>			</textField>			<textField isBlankWhenNull="true">				<reportElement x="58" y="0" width="694" height="58" uuid="a3d00f24-f566-4e27-a717-72b170e3d259"/>				<textElement textAlignment="Center" verticalAlignment="Middle">					<font fontName="Arial" size="32" isBold="true"/>				</textElement>				<textFieldExpression><![CDATA[$R{title}]]></textFieldExpression>			</textField>			<image scaleImage="RetainShape">				<reportElement x="0" y="0" width="58" height="58" uuid="a6d8527f-49e6-428a-8866-9677e0cc4bb4"/>				<imageExpression><![CDATA["nx_ent.jpg"]]></imageExpression>			</image>		</band>	</noData></jasperReport>